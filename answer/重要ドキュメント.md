ä»¥ä¸‹ã«ã€**CKADè©¦é¨“å¯¾ç­–ç”¨ã® `kubectl` å®Ÿè·µã‚³ãƒãƒ³ãƒ‰é›†** ã‚’æ•´ç†ã—ã¦æç¤ºã—ã¾ã™ã€‚  
ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã”ã¨ã«åˆ†é¡ã—ã€**é †ã«å¾©ç¿’ã—ã‚„ã™ã„ï¼†ã‚³ãƒ”ãƒ¼ã—ã‚„ã™ã„**å½¢å¼ã«æœ€é©åŒ–ã—ã¾ã—ãŸã€‚


# ã‚ˆãä½¿ã†ã‚»ãƒƒãƒˆï¼ˆCKADæ¨¡è©¦ or ãƒ­ãƒ¼ã‚«ãƒ«ç·´ç¿’ç”¨ï¼‰
alias k=kubectl
export do="--dry-run=client -o yaml"
alias kn='kubectl config set-context --current --namespace '
alias ke='k explain'
alias kgp='k get po'
alias kaf='k apply -f'

---
alias k=kubectl                               # kubectl ã®çœç•¥å½¢
alias ke='k explain'                          # ãƒªã‚½ãƒ¼ã‚¹æ§‹é€ ã®ç¢ºèªã«ä¾¿åˆ©
alias kgp='k get po'                          # Podä¸€è¦§è¡¨ç¤ºã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
alias kaf='k apply -f'                        # YAMLé©ç”¨ã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ

k config set-context -h | grep name           # --current ã¨ --namespace ã®æ§‹æ–‡ç¢ºèª
alias kn='kubectl config set-context --current --namespace '  # namespaceåˆ‡æ›¿ã‚³ãƒãƒ³ãƒ‰

alias

k run -h | grep dry                           # --dry-run=client ã®ä½¿ã„æ–¹ç¢ºèª
export do="--dry-run=client -o yaml"          # ã‚ˆãä½¿ã†æ§‹æ–‡ã‚’å¤‰æ•°åŒ–

echo $do                                      # å¤‰æ•°ã®ç¢ºèªï¼ˆä»»æ„ï¼‰
---

---

## âœ… CKADã‚³ãƒãƒ³ãƒ‰ ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆï¼ˆå®Ÿè·µãƒ»èª¿æŸ»ãƒ»YAMLç”Ÿæˆç³»ï¼‰

---

### ğŸ”§ åŸºæœ¬è¨­å®š & ç’°å¢ƒç¢ºèª

```bash
# ã‚¨ã‚¤ãƒªã‚¢ã‚¹è¨­å®šï¼ˆ.bashrc / .zshrc ãªã©ã«è¿½åŠ æ¨å¥¨ï¼‰
alias k=kubectl

# ç¾åœ¨ã® context ã« namespace ã‚’è¨­å®š
k config set-context --current --namespace=<namespace>

# config ã‚³ãƒãƒ³ãƒ‰ã®ãƒ˜ãƒ«ãƒ—ç¢ºèª
k config set-context -h

# ä½¿ç”¨å¯èƒ½ãªãƒªã‚½ãƒ¼ã‚¹ä¸€è¦§ï¼ˆPodé–¢é€£ï¼‰
k api-resources | grep po
```

---

### ğŸ” ãƒªã‚½ãƒ¼ã‚¹æ§‹é€ ç¢ºèªï¼ˆ`kubectl explain`ï¼‰

```bash
# Deployment ã®æ§‹é€ ï¼ˆspec ä»¥ä¸‹ï¼‰
k explain deploy.spec

# explain ã‚³ãƒãƒ³ãƒ‰ã®å…¨ä½“ãƒ˜ãƒ«ãƒ—ï¼ˆ--recursive æ¢ç´¢ï¼‰
k explain -h

# volume é–¢é€£ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ç¢ºèª
k explain po --recursive | grep volume
k explain deploy --recursive | grep volume

# ConfigMap ã®å†å¸°çš„æ§‹é€ 
k explain configMap --recursive

# livenessProbe / readinessProbe ã®ç¢ºèª
k explain po --recursive | grep Probe
```

---

### ğŸ“„ YAMLãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç”Ÿæˆã¨é©ç”¨

```bash
# Pod YAML ã‚’ç”Ÿæˆã—ã¦ç·¨é›†ãƒ»é©ç”¨
k run testpod --image=nginx --dry-run=client -o yaml > pod.yaml
k apply -f pod.yaml

# Deployment YAML ã®é››å½¢ç”Ÿæˆ
k run testdeploy --image=nginx --dry-run=client -o yaml > testdeploy.yaml

# Service YAML ã‚’ expose ã‹ã‚‰ç”Ÿæˆ
k expose pod <pod-name> --port=80 --target-port=80 --type=ClusterIP --dry-run=client -o yaml > service.yaml

# --dry-run=client ã®æ„å‘³ãŒä¸æ˜ãªå ´åˆï¼ˆãƒ˜ãƒ«ãƒ—ç¢ºèªï¼‰
k run --help | grep dry
```

---

### ğŸ–¥ Pod/Container çŠ¶æ…‹ã¨ãƒ‡ãƒãƒƒã‚°

```bash
# Pod ã®çŠ¶æ…‹ç¢ºèªï¼ˆè©³ç´°ä»˜ãï¼‰
k get po -o wide

# å…¨ãƒªã‚½ãƒ¼ã‚¹ã‚’ãƒãƒ¼ãƒ ã‚¹ãƒšãƒ¼ã‚¹æŒ‡å®šã§ä¸€è¦§è¡¨ç¤º
k get all -n <namespace>

# Podå†…ã«å…¥ã£ã¦ã‚·ã‚§ãƒ«èµ·å‹•ï¼ˆsh ã¾ãŸã¯ bashï¼‰
k exec -it <pod-name> -- /bin/sh
k exec -it <pod-name> -- bash

# busybox Pod ã§ç°¡æ˜“æ¤œè¨¼ï¼ˆ--restart=Never ä»˜ãï¼‰
k run tmp --rm -it --image=busybox --restart=Never -- sh

# --restart=Never ã®æ„å‘³ãŒä¸æ˜ãªå ´åˆ
k run -h | grep busybox
```

---

çµè«–ã¨ã—ã¦è¦šãˆã‚‹ã¹ããƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆä¸¸æš—è¨˜æ¨å¥¨ï¼‰
å¯¾è±¡	ã‚³ãƒãƒ³ãƒ‰ä¾‹
Probeæ§‹é€ 	kubectl explain deploy.spec.template.spec.containers.livenessProbe
volumeæ§‹é€ 	kubectl explain po --recursive
å…¨æ§‹é€ èª¿æŸ»	kubectl explain po --recursive

è¦ç‚¹ã¾ã¨ã‚ï¼ˆå…ˆã«çµè«–ï¼‰ CKAD æœ¬è©¦é¨“ã® SSH ãƒ›ã‚¹ãƒˆã«ã¯ ã™ã§ã« alias k=kubectl ãŒãƒ—ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚ã—ãŸãŒã£ã¦ è¿½åŠ è¨­å®šã›ãšã«ãã®ã¾ã¾ k ã‚’ä½¿ã†ã®ãŒæœ€é€Ÿ ã§ã™ã€‚ç’°å¢ƒå¤‰æ•° export K=kubectl ã¯ $K get pods ã®ã‚ˆã†ã« $ ã‚’ä»˜ã‘ã‚‹ 1 æ–‡å­—ã¨ Shift æ“ä½œãŒå¢—ãˆã‚‹ã†ãˆã€è©¦é¨“ç’°å¢ƒã§ã¯ã†ã¾ãè©•ä¾¡ã•ã‚Œãªã„ï¼æ¯ã‚·ã‚§ãƒ«ã§è¨­å®šãŒå¿…è¦ã«ãªã‚‹ã‚±ãƒ¼ã‚¹ã‚‚å ±å‘Šã•ã‚Œã¦ã„ã¾ã™ã€‚ã‚ˆã£ã¦å®Ÿæˆ¦ã§ã¯ alias ã‚’æ¨å¥¨ ã—ã¾ã™ã€‚

1. alias k=kubectl ãŒå„ªä½ãªç†ç”±
1.1 ãƒ—ãƒªã‚»ãƒƒãƒˆã®è£ä»˜ã‘
Linux Foundation å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ã€ŒSSH ãƒ›ã‚¹ãƒˆã«ã¯ kubectl ã¨ k alias ãŒäº‹å‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã€ã¨æ˜è¨˜ã€‚
1.2 å®Ÿä½“é¨“ã‹ã‚‰ã®æ¨å¥¨
å¤šæ•°ã®å—é¨“è¨˜ãƒ»Tips ãŒã€Œk=kubectl ã¯æ—¢ã«ã‚ã‚‹ã€ã€Œæœ€åˆã® 30 ç§’ã§ alias ã‚’ç¢ºèªã›ã‚ˆã€ã¨åŠ©è¨€ã€‚

2. ç’°å¢ƒå¤‰æ•° export K=kubectl ã‚’ä½¿ã†å ´åˆã®è½ã¨ã—ç©´
å‘¼ã³å‡ºã—ã« $ ãŒè¦ã‚‹ â€“ $K get pod ã¨ãªã‚Š â€œ$â€ ã®åˆ†ã ã‘ã‚¿ã‚¤ãƒ—ãŒå¢—ãˆã¾ã™ã€‚
è£œå®ŒãŒåŠ¹ã‹ãªã„ â€“ bash-completion ã¯ç’°å¢ƒå¤‰æ•°ã‚’ã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦èªè­˜ã—ã¾ã›ã‚“ã€‚
å‹•ä½œä¿è¨¼ãªã— â€“ Reddit ã§ã¯ã€Œexport ãŒå‹•ã‹ãªã‹ã£ãŸã€ã¨ã®å ±å‘Šã‚‚ã€‚
æ–°ã‚·ã‚§ãƒ«ã§æ¶ˆãˆã‚‹ â€“ è³ªå•ã”ã¨ã«ç•°ãªã‚‹ãƒãƒ¼ãƒ‰ã¸ SSH ã™ã‚‹ãŸã‚ã€æ¯å› export ã™ã‚‹æ‰‹é–“ãŒç™ºç”Ÿã—ã¾ã™ã€‚
å®Ÿéš›ã«æ´»ç”¨ã—ã¦ã„ã‚‹åˆæ ¼è€…ã¯å°‘æ•°æ´¾ã§ã€alias ã¨ã®ä½µç”¨ä¾‹ï¼ˆdo="--dry-run=client -o yaml" ãªã©ï¼‰ã«ã¨ã©ã¾ã£ã¦ã„ã¾ã™ã€‚

3. è©¦é¨“é–‹å§‹å¾Œ 1 åˆ†ã§ã‚„ã‚‹ã“ã¨ï¼ˆé«˜é€Ÿã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼‰
# ã»ã¼ä¸è¦ã ãŒå¿µã®ãŸã‚ç¢ºèª
alias k        # æ—¢ã« 'kubectl' ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°OK
complete -F __start_kubectl k   # è£œå®ŒãŒåŠ¹ã‹ãªã„å ´åˆã®ã¿è¿½åŠ å…¥åŠ›
# è¿½åŠ ã™ã‚‹ã¨ä¾¿åˆ©ãªå¤‰æ•°ãƒ»alias ï¼ˆ5ç§’ã§ã‚³ãƒ”ãƒšï¼‰
export do="--dry-run=client -o yaml"
alias kn='kubectl config set-context --current --namespace '

do ã¯ YAML é››å½¢ç”Ÿæˆã§é »å‡ºã€‚
kn ã¯åå‰ç©ºé–“åˆ‡æ›¿ã‚’çŸ­ç¸®ã€‚ è¨­å®šã¯ 1 å•ç›®ã® SSH ã‚»ãƒƒã‚·ãƒ§ãƒ³å†…ã§å®Ÿæ–½ã—ã€ä»¥å¾Œ exit/ssh ã™ã‚‹ãŸã³ã«å†ã‚³ãƒ”ãƒšã™ã‚‹ã®ãŒå®‰å…¨ã§ã™ã€‚

4. è£œè¶³ï¼šç·´ç¿’æ™‚ã®ç­‹è‚‰ãƒ¡ãƒ¢ãƒªã®ä½œã‚Šæ–¹
æ—¥å¸¸ã‹ã‚‰ k ã‚’ä½¿ã† â€“ .bashrc ã« alias k=kubectl ã‚’å…¥ã‚Œã€ckad ç”¨ã‚¯ãƒ©ã‚¹ã‚¿æ“ä½œã¯å¸¸ã« k ã§ã€‚
imperative â†’ declarative â€“ k create deployment nginx --image=nginx $do > dep.yaml ã®æµã‚Œã‚’èº«ä½“ã§è¦šãˆã‚‹ã€‚
çœç•¥å½¢ãƒªã‚¹ãƒˆã‚’æš—è¨˜ â€“ po,svc,deploy,cm,ing,ns ãªã©ã€‚
Killer Shell/killercoda ã§æ¨¡è©¦ â€“ æœ¬ç•ª UI ã«è¿‘ã„æ“ä½œæ„Ÿã‚’äº‹å‰ã«ä½“é¨“ã€‚

5. ã¾ã¨ã‚
CKAD æœ¬ç•ªã¯ alias k ãŒæœ€é€Ÿãƒ»ç¢ºå®Ÿã€‚ç’°å¢ƒå¤‰æ•°ã¯ä¸è¦ã‹ã¤ãƒªã‚¹ã‚¯é«˜ã€‚
è¿½åŠ ã™ã‚‹ã¨ã—ã¦ã‚‚ do ãªã©æ•°è¡Œã«ç•™ã‚ã€æ®‹ã‚Šæ™‚é–“ã¯ã‚¿ã‚¹ã‚¯æ”»ç•¥ã«é›†ä¸­ã—ã¾ã—ã‚‡ã†ã€‚
ç–‘å•ãŒæ®‹ã‚Œã°ã€ã¾ãš alias k ãŒåŠ¹ãã‹è©¦ã™â€“â€“ã‚‚ã—å‡ºåŠ›ãŒç„¡ã‘ã‚Œã°å³æ™‚è¨­å®šã€‚
ã“ã‚Œã§ â€œkubectl é•·æ–‡ã‚¿ã‚¤ãƒ—åœ°ç„â€ ã‹ã‚‰è§£æ”¾ã•ã‚Œã€å•é¡Œè§£æ±ºã«å°‚å¿µã§ãã¾ã™ã€‚å¥é—˜ã‚’ç¥ˆã‚Šã¾ã™ã€‚
